{
  "schema.prisma": {
    "content": "generator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider  = \"sqlite\"\n  url       = env(\"DATABASE_URL\")\n}\n\n////////////////////////////////////////////////////\n// 1. AUTH & USERS (Login System - NextAuth Required)\n////////////////////////////////////////////////////\nmodel User {\n  id            String    @id @default(cuid())\n  name          String?\n  email         String?   @unique\n  emailVerified DateTime?\n  image         String?\n  password      String?   // Optional for OAuth (Google), Required for Email/Pass\n\n  // Custom Fields for your Logic\n  role             String   @default(\"CLIENT\") // ADMIN, CLIENT, SUPERADMIN\n  isActive         Boolean  @default(true)\n  lastLoginAt      DateTime?\n  societyAccountId String?  // Link to SocietyAccount manually or via relation below\n\n  // Relations for NextAuth\n  accounts      Account[]\n  sessions      Session[]\n  \n  // Relation to your custom tables\n  posts         Post[]\n  \n  createdAt     DateTime @default(now())\n  updatedAt     DateTime @updatedAt\n\n  @@map(\"users\")\n}\n\n// NextAuth: Account Linking (Google, GitHub etc.)\nmodel Account {\n  id                 String  @id @default(cuid())\n  userId             String\n  type               String\n  provider           String\n  providerAccountId  String\n  refresh_token      String?\n  access_token       String?\n  expires_at         Int?\n  token_type         String?\n  scope              String?\n  id_token           String?\n  session_state      String?\n\n  user User @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  @@unique([provider, providerAccountId])\n  @@map(\"accounts\")\n}\n\n// NextAuth: Session Management\nmodel Session {\n  id           String   @id @default(cuid())\n  sessionToken String   @unique\n  userId       String\n  expires      DateTime\n  user         User     @relation(fields: [userId], references: [id], onDelete: Cascade)\n\n  @@map(\"sessions\")\n}\n\n// NextAuth: Email Verification\nmodel VerificationToken {\n  identifier String\n  token      String   @unique\n  expires    DateTime\n\n  @@unique([identifier, token])\n  @@map(\"verification_tokens\")\n}\n\n////////////////////////////////////////////////////\n// 2. SOCIETY ACCOUNTS (Your Business Logic)\n////////////////////////////////////////////////////\nmodel SocietyAccount {\n  id                  String   @id @default(uuid())\n  name                String\n  adminName           String?\n  email               String   @unique\n  phone               String?\n  address             String?\n  subscriptionPlan    String   @default(\"TRIAL\")\n  status              String   @default(\"TRIAL\")\n  trialEndsAt         DateTime?\n  subscriptionEndsAt  DateTime?\n  isActive            Boolean  @default(true)\n  createdAt           DateTime @default(now())\n  updatedAt           DateTime @updatedAt\n\n  @@map(\"society_accounts\")\n}\n\n////////////////////////////////////////////////////\n// 3. SOCIETIES\n////////////////////////////////////////////////////\nmodel Society {\n  id                String   @id @default(uuid())\n  name              String\n  description       String?\n  address           String?\n  phone             String?\n  email             String?\n  societyAccountId  String\n  createdByUserId   String\n  isActive          Boolean  @default(true)\n  createdAt         DateTime @default(now())\n  updatedAt         DateTime @updatedAt\n\n  @@map(\"societies\")\n}\n\n////////////////////////////////////////////////////\n// 4. POSTS\n////////////////////////////////////////////////////\nmodel Post {\n  id        String   @id @default(uuid())\n  title     String\n  content   String?\n  published Boolean  @default(false)\n  authorId  String\n  user      User     @relation(fields: [authorId], references: [id])\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n\n  @@map(\"posts\")\n}\n\n////////////////////////////////////////////////////\n// 5. AUTOMATION TASKS (No Relations)\n////////////////////////////////////////////////////\nmodel AutomationTask {\n  id              String    @id @default(uuid())\n  task_name       String    @unique\n  description     String?\n  schedule        String?   @default(\"manual\")\n  enabled         Boolean?  @default(true)\n  last_run_status String?\n  last_run_at     DateTime?\n  created_at      DateTime? @default(now())\n\n  @@map(\"automation_tasks\")\n}\n\n////////////////////////////////////////////////////\n// 6. AUTOMATION LOGS (No Relations)\n////////////////////////////////////////////////////\nmodel AutomationLog {\n  id          String   @id @default(uuid())\n  task_name   String?\n  status      String\n  message     String?\n  details     Json?\n  duration_ms Int?\n  run_time    DateTime? @default(now())\n\n  @@map(\"automation_logs\")\n}\n",
    "size": 4662,
    "lastModified": "2025-11-23T05:16:22.437Z"
  },
  "schema-dev.prisma": {
    "content": "// This is your Prisma schema file for development,\n// learn more about it in the docs: https://pris.ly/d/prisma-schema\n\n// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?\n// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init\n\ngenerator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider = \"sqlite\"\n  url      = \"file:./dev.db\"\n}\n\nmodel User {\n  id                String    @id @default(cuid())\n  email             String    @unique\n  name              String?\n  password          String\n  role              String    @default(\"CLIENT\") // CLIENT, SUPERADMIN\n  isActive          Boolean   @default(true)\n  lastLoginAt       DateTime?\n  societyAccountId  String?\n  createdAt         DateTime  @default(now())\n  updatedAt         DateTime  @updatedAt\n  \n  // Relations\n  societyAccount    SocietyAccount? @relation(fields: [societyAccountId], references: [id])\n  createdSocieties  Society[]\n  \n  @@map(\"users\")\n}\n\nmodel SocietyAccount {\n  id                  String   @id @default(cuid())\n  name                String\n  adminName           String?\n  email               String   @unique\n  phone               String?\n  address             String?\n  subscriptionPlan    String   @default(\"TRIAL\") // TRIAL, BASIC, PRO, ENTERPRISE\n  status              String   @default(\"TRIAL\") // TRIAL, ACTIVE, EXPIRED, LOCKED\n  trialEndsAt         DateTime?\n  subscriptionEndsAt  DateTime?\n  isActive            Boolean  @default(true)\n  createdAt           DateTime @default(now())\n  updatedAt           DateTime @updatedAt\n  \n  // Relations\n  users               User[]\n  societies           Society[]\n  \n  @@map(\"society_accounts\")\n}\n\nmodel Society {\n  id              String   @id @default(cuid())\n  name            String\n  description     String?\n  address         String?\n  phone           String?\n  email           String?\n  societyAccountId String\n  createdByUserId String\n  isActive        Boolean  @default(true)\n  createdAt       DateTime @default(now())\n  updatedAt       DateTime @updatedAt\n  \n  // Relations\n  societyAccount  SocietyAccount @relation(fields: [societyAccountId], references: [id])\n  createdByUser   User           @relation(fields: [createdByUserId], references: [id])\n  \n  @@map(\"societies\")\n}\n\nmodel Post {\n  id        String   @id @default(cuid())\n  title     String\n  content   String?\n  published Boolean  @default(false)\n  authorId  String\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}",
    "size": 2510,
    "lastModified": "2025-11-23T05:16:22.437Z"
  },
  "schema-prod.prisma": {
    "content": "// This is your Prisma schema file for production (Supabase),\n// learn more about it in the docs: https://pris.ly/d/prisma-schema\n\n// Looking for ways to speed up your queries, or scale easily with your serverless or edge functions?\n// Try Prisma Accelerate: https://pris.ly/cli/accelerate-init\n\ngenerator client {\n  provider = \"prisma-client-js\"\n}\n\ndatasource db {\n  provider = \"postgresql\"\n  url      = env(\"DATABASE_URL\")\n}\n\nmodel User {\n  id                String    @id @default(cuid())\n  email             String    @unique\n  name              String?\n  password          String\n  role              String    @default(\"CLIENT\") // CLIENT, SUPERADMIN\n  isActive          Boolean   @default(true)\n  lastLoginAt       DateTime?\n  societyAccountId  String?\n  createdAt         DateTime  @default(now())\n  updatedAt         DateTime  @updatedAt\n  \n  // Relations\n  societyAccount    SocietyAccount? @relation(fields: [societyAccountId], references: [id])\n  createdSocieties  Society[]\n  \n  @@map(\"users\")\n}\n\nmodel SocietyAccount {\n  id                  String   @id @default(cuid())\n  name                String\n  adminName           String?\n  email               String   @unique\n  phone               String?\n  address             String?\n  subscriptionPlan    String   @default(\"TRIAL\") // TRIAL, BASIC, PRO, ENTERPRISE\n  status              String   @default(\"TRIAL\") // TRIAL, ACTIVE, EXPIRED, LOCKED\n  trialEndsAt         DateTime?\n  subscriptionEndsAt  DateTime?\n  isActive            Boolean  @default(true)\n  createdAt           DateTime @default(now())\n  updatedAt           DateTime @updatedAt\n  \n  // Relations\n  users               User[]\n  societies           Society[]\n  \n  @@map(\"society_accounts\")\n}\n\nmodel Society {\n  id              String   @id @default(cuid())\n  name            String\n  description     String?\n  address         String?\n  phone           String?\n  email           String?\n  societyAccountId String\n  createdByUserId String\n  isActive        Boolean  @default(true)\n  createdAt       DateTime @default(now())\n  updatedAt       DateTime @updatedAt\n  \n  // Relations\n  societyAccount  SocietyAccount @relation(fields: [societyAccountId], references: [id])\n  createdByUser   User           @relation(fields: [createdByUserId], references: [id])\n  \n  @@map(\"societies\")\n}\n\nmodel Post {\n  id        String   @id @default(cuid())\n  title     String\n  content   String?\n  published Boolean  @default(false)\n  authorId  String\n  createdAt DateTime @default(now())\n  updatedAt DateTime @updatedAt\n}",
    "size": 2528,
    "lastModified": "2025-11-23T05:16:22.437Z"
  },
  "seed.ts": {
    "content": "import { PrismaClient } from '@prisma/client'\nimport bcrypt from 'bcryptjs'\n\nconst prisma = new PrismaClient()\n\nasync function main() {\n  console.log('Seeding database...')\n\n  // Create super admin user\n  const superAdminEmail = 'superadmin@saanify.com'\n  const existingAdmin = await prisma.user.findUnique({\n    where: { email: superAdminEmail }\n  })\n\n  if (!existingAdmin) {\n    const hashedPassword = await bcrypt.hash('admin123', 12)\n    \n    const superAdmin = await prisma.user.create({\n      data: {\n        email: superAdminEmail,\n        name: 'Super Admin',\n        password: hashedPassword,\n        role: 'SUPER_ADMIN',\n        isActive: true\n      }\n    })\n    \n    console.log('âœ… Super admin created:', superAdmin.email)\n  } else {\n    console.log('âœ… Super admin already exists:', existingAdmin.email)\n  }\n\n  // Create dummy society accounts as requested\n  const dummySocieties = [\n    {\n      name: 'Green Valley Society',\n      adminName: 'Robert Johnson',\n      email: 'admin@greenvalley.com',\n      phone: '+91 98765 43210',\n      address: '123 Green Valley Road, Bangalore',\n      subscriptionPlan: 'PRO' as const,\n      status: 'ACTIVE' as const,\n      trialEndsAt: null,\n      subscriptionEndsAt: new Date('2024-12-31')\n    },\n    {\n      name: 'Sunset Apartments',\n      adminName: 'Maria Garcia',\n      email: 'admin@sunsetapartments.com',\n      phone: '+91 98765 43211',\n      address: '456 Sunset Boulevard, Mumbai',\n      subscriptionPlan: 'TRIAL' as const,\n      status: 'TRIAL' as const,\n      trialEndsAt: new Date(Date.now() + 7 * 24 * 60 * 60 * 1000), // 7 days from now\n      subscriptionEndsAt: null\n    },\n    {\n      name: 'Royal Residency',\n      adminName: 'William Chen',\n      email: 'admin@royalresidency.com',\n      phone: '+91 98765 43212',\n      address: '789 Royal Street, Delhi',\n      subscriptionPlan: 'BASIC' as const,\n      status: 'EXPIRED' as const,\n      trialEndsAt: null,\n      subscriptionEndsAt: new Date('2024-01-31')\n    },\n    {\n      name: 'Blue Sky Heights',\n      adminName: 'Patricia Williams',\n      email: 'admin@blueskyheights.com',\n      phone: '+91 98765 43213',\n      address: '321 Blue Sky Avenue, Pune',\n      subscriptionPlan: 'ENTERPRISE' as const,\n      status: 'LOCKED' as const,\n      trialEndsAt: null,\n      subscriptionEndsAt: new Date('2024-06-30')\n    }\n  ]\n\n  for (const society of dummySocieties) {\n    const existingSociety = await prisma.societyAccount.findUnique({\n      where: { email: society.email }\n    })\n\n    if (!existingSociety) {\n      // Create society account\n      const createdSociety = await prisma.societyAccount.create({\n        data: society\n      })\n\n      // Create admin user for the society\n      const hashedPassword = await bcrypt.hash('Saanify@123', 12)\n      \n      await prisma.user.create({\n        data: {\n          email: society.email,\n          name: society.adminName,\n          password: hashedPassword,\n          role: 'CLIENT',\n          societyAccountId: createdSociety.id,\n          isActive: society.status !== 'LOCKED'\n        }\n      })\n      \n      console.log(`âœ… Dummy society created: ${society.name}`)\n    } else {\n      console.log(`âœ… Society already exists: ${society.name}`)\n    }\n  }\n\n  // Create demo client user\n  const clientEmail = 'client@saanify.com'\n  const existingClient = await prisma.user.findUnique({\n    where: { email: clientEmail }\n  })\n\n  if (!existingClient) {\n    const hashedPassword = await bcrypt.hash('client123', 12)\n    \n    // Get first society account for client\n    const firstSociety = await prisma.societyAccount.findFirst()\n    \n    const client = await prisma.user.create({\n      data: {\n        email: clientEmail,\n        name: 'Demo Client',\n        password: hashedPassword,\n        role: 'CLIENT',\n        societyAccountId: firstSociety?.id,\n        isActive: true\n      }\n    })\n    \n    console.log('âœ… Demo client created:', client.email)\n  } else {\n    console.log('âœ… Demo client already exists:', existingClient.email)\n  }\n\n  console.log('ðŸŽ‰ Database seeding completed!')\n}\n\nmain()\n  .catch((e) => {\n    console.error('âŒ Error seeding database:', e)\n    process.exit(1)\n  })\n  .finally(async () => {\n    await prisma.$disconnect()\n  })",
    "size": 4208,
    "lastModified": "2025-11-23T05:16:22.437Z"
  },
  "dev.db": {
    "size": 110592,
    "lastModified": "2025-11-23T05:17:30.354Z",
    "isBinary": true
  }
}